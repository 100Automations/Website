<!-- This will be where automations are displayed on the home page -->
<div class="automations">
  <div class="ato_grid">
    <!-- Jekyll loops through our automation collection -->
    {% for automation in site.automations %}
    <div class="full-ato-card">
      <button id="button_{{ forloop.index }}" class=" button-needs">
        Needs Help
      </button>
      <div class="ato_cell">
        <!-- Each card that is created will have a unique id accessed though the forloop.index-->
        <div id="card_{{forloop.index}}" class="ato_card ">
          <!-- A list of needs that will display when the user clicks on it -->
          <!-- Note, we will be able to access the automation.needs and loop through them for display-->
          <div class="ato_needs">
            <ul id="needs_{{ forloop.index }}" class="needs_list d-none">
              {% for item in automation.needs %}
                <li>{{ item | capitalize }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- This is our image that we access through our own API -->
          <!-- The image folder is located in our assets -->
          <div class="ato_card-media">
            <img src="{{ automation.image | absolute_url }}" alt="{{ automation.title }}">
          </div>
          <div class="ato_card-title">
            <h2 class="">{{ automation.title }}</h2>
          </div>
          <div class="ato_card-text">
            <div>
              {{ automation.description }}
            </div>
          </div>
        <div class="ato_card-actions">
          <!-- Automation Readme url is located in links index 1 -->
          <!-- We will need to design a README.md button -->
          <a href="{{ automation.links[1].url }}"
            class="read-me_button">
            ReadMe <i class="fa fa-github"></i>
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
  const toggleList = () => {
    needs_id = event.currentTarget.id.replace("button_", "needs_");
    document.getElementById(needs_id).classList.toggle('d-none');
  }
  Array.from(document.querySelectorAll('.button-needs')).forEach((button) => {
    button.addEventListener('click', toggleList);
  })
</script>